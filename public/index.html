<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kamusal Mal Oyunu - Ekonomi Deneyi</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Deney</h1>
 
        </header>

        <!-- Welcome Screen -->
        <div id="welcome-screen" class="screen active">
            <div class="card">
                <h2>Deneye Hoş Geldiniz!</h2>
                <p>Bu deney, grup içindeki karar verme süreçlerini inceler. Deney yaklaşık 10-15 dakika sürecektir.</p>
                
                <div class="lottery-prizes">
                    <h3>Çekiliş Ödülleri</h3>
                    <div class="prize-list">
                        <div class="prize-item grand">
                            <span class="prize-count">1 kişi</span>
                            <span class="prize-desc">400 TL Migros Hediye Çeki</span>
                        </div>
                        <div class="prize-item major">
                            <span class="prize-count">2 kişi</span>
                            <span class="prize-desc">300 TL Amazon Hediye Çeki</span>
                        </div>
                        <div class="prize-item bonus">
                            <span class="prize-count">3 kişi</span>
                            <span class="prize-desc">200 TL Starbucks Hediye Çeki</span>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <h3>Deney hakkında genel bilgiler:</h3>
                    <ul>
                        <li>4 kişilik anonim gruplar halinde bir oyun oynayacaksınız</li>
                        <li>Her oyuncu 10 kredi ile başlayacak ve daha fazla kredi kazanma fırsatınız olacak</li>
                        <li>Grubuzun ortak projesi için bir karar vermeniz istenecek</li>
                        <li>Oyundan kazandığınız kredilerle çekiliş için bir veya daha fazla katılım hakkına sahip olabilirsiniz</li>
                        <li>Lütfen isim ve e-posta bilgilerinizi doldurunuz. Bu bilgileri eğer ödül kazanırsanız size ulaşabilmek için daha sonra kullanacağız. Oyun tamamen anonim olacaktır ve kişisel bilgileriniz saklı tutulacaktır</li>
                        <li>Oyun sırasında internet bağlantınız kesilirse veya sayfa kapanırsa, aynı e-posta adresini kullanarak grubunuza geri dönebilir ve oyuna devam edebilirsiniz. 3 dakika içinde geri dönmeniz yeterlidir</li>

                    </ul>
                </div>
                
                <div class="form-group">
                    <label for="participant-name">İsim Soyisim: <span style="color: red;">*</span></label>
                    <input type="text" id="participant-name" placeholder="Adınızı giriniz" required>
                </div>
                
                <div class="form-group">
                    <label for="participant-email">E-posta: <span style="color: red;">*</span></label>
                    <input type="email" id="participant-email" placeholder="E-posta adresinizi giriniz" required>
                </div>
                
                <button id="join-btn" class="btn btn-primary">Oyuna Katıl</button>
            </div>
        </div>

        <!-- Waiting for Players Screen -->
        <div id="waiting-screen" class="screen">
            <div class="card">
                <h2>Diğer Oyuncular Bekleniyor...</h2>
                <div class="player-counter">
                    <span id="current-players">1</span> / 4 oyuncu
                </div>
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Lütfen bekleyin, diğer oyuncular katılıyor...</p>
                </div>
                <div class="room-info">
                    <p><strong>Oda ID:</strong> <span id="room-id">-</span></p>
                    <p><strong>Oyuncu Numarası:</strong> <span id="player-number">-</span></p>
                </div>
            </div>
        </div>

        <!-- Consent Screen -->
        <div id="consent-screen" class="screen">
            <div class="card">
                <h2>Araştırma Onay Formu</h2>
                <div class="consent-content">
                    <div class="consent-section">
                        <h3>Araştırmanın Amacı</h3>
                        <p>Bu deney, grup içindeki karar verme süreçlerini ve işbirliği davranışlarını incelemektedir. Veriler akademik araştırma amaçlı kullanılacaktır.</p>
                    </div>
                    
                    <div class="consent-section">
                        <h3>Veri Toplama</h3>
                        <p>Bu deney sırasında aşağıdaki veriler toplanacaktır:</p>
                        <ul>
                            <li>Oyun içindeki kararlarınız</li>
                            <li>Anlama sorularına verdiğiniz cevaplar</li>
                            <li>Demografik bilgileriniz (yaş, cinsiyet, bölüm)</li>
                        </ul>
                    </div>

                    <div class="consent-section">
                        <h3>Gizlilik</h3>
                        <p>Tüm verileriniz anonim tutulacak ve sadece akademik araştırma amaçlı kullanılacaktır. Kişisel kimliğiniz saklı tutulacaktır.</p>
                    </div>

                    <div class="consent-section">
                        <h3>Katılım</h3>
                        <p>Bu deneye katılımınız tamamen gönüllüdür. İstediğiniz zaman deneyden ayrılabilirsiniz.</p>
                    </div>

                    <div class="consent-checkbox">
                        <label>
                            <input type="checkbox" id="consent-checkbox">
                            <span class="checkmark"></span>
                            Yukarıdaki bilgileri okudum, anladım ve deneye katılmayı kabul ediyorum.
                        </label>
                    </div>
                </div>
                
                <button id="submit-consent-btn" class="btn btn-primary" disabled>Onaylıyorum ve Devam Et</button>
            </div>
        </div>

        <!-- Demographics Screen -->
        <div id="demographics-screen" class="screen">
            <div class="card">
                <h2>Demografik Bilgiler</h2>
                <p>Lütfen aşağıdaki bilgileri doldurun:</p>
                
                <div class="form-group">
                    <label for="age">Yaşınız:</label>
                    <input type="number" id="age" min="18" max="100" required>
                </div>
                
                <div class="form-group">
                    <label for="gender">Cinsiyetiniz:</label>
                    <select id="gender" required>
                        <option value="">Seçiniz</option>
                        <option value="erkek">Erkek</option>
                        <option value="kadın">Kadın</option>
                        <option value="diger">Diğer</option>
                        <option value="belirtmek-istemiyorum">Belirtmek istemiyorum</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="major">Bölümünüz:</label>
                    <input type="text" id="major" placeholder="Örn: İktisat, İşletme, Mühendislik" required>
                </div>
                
                <button id="submit-demographics-btn" class="btn btn-primary">Bilgileri Kaydet</button>
            </div>
        </div>

        <!-- Waiting for Experiment Start Screen -->
        <div id="waiting-experiment-screen" class="screen">
            <div class="card">
                <div class="waiting-info">
                    <div class="check-icon">✓</div>
                    <p>Tüm ön hazırlıkları tamamladınız!</p>
                    <p>Tüm oyuncular hazır olduğunda deney talimatlarını göreceksiniz.</p>
                </div>
                <div class="player-counter">
                    Diğer oyuncuların cevapları bekleniyor...
                </div>
                <div class="loading">
                    <div class="spinner"></div>
                </div>
            </div>
        </div>

        <!-- Instructions Screen -->
        <div id="instructions-screen" class="screen">
            <div class="card">
                <h2>Oyun Talimatları</h2>
                <div class="instructions-content">
                    <div class="instruction-item">
                        <h3>Durum</h3>
                        <p>4 kişilik bir gruba rastgele atandınız. Gruptaki her kişi aynı talimatları almaktadır. Bu deneye sadece bir kez katılabilirsiniz.</p>
                        <p>Grubunuzdaki her kişiye deneye katıldığı için <strong>10 kredi</strong> verilmektedir. 10-14 arası kredi çekilişe bir katılım hakkı; 15-20 arası kredi çekilişe iki katılım hakkı; 21 ve üzeri kredi ise çekilişe üç katılım hakkı anlamına gelir. Ama oyundan sonra krediniz 0-9 arasında kalırsa çekilişe isminiz yazılmaz.</p>
                    </div>
                    
                    <div class="instruction-item">
                        <h3>Karar Verme</h3>
                        <p>Oyun başladığı zaman belirtilen süre içerisinde 10 kredinizin ne kadarını kendiniz için saklayacağınıza ve ne kadarını grubun ortak projesine katkıda bulunacağınıza karar vereceksiniz.</p>
                        <p><strong>Ortak proje için bağışlanan tüm para ikiye katlanır ve 4 oyuncu arasında eşit olarak paylaştırılır.</strong></p>
                        <p>Bu nedenle, ortak projeye katkıda bulunan her 2 kredi için, her grup üyesi 1 kredi alır.</p>
                    </div>

                    <div class="instruction-item">
                        <h3>Örnek Durumlar</h3>
                        <p><strong>Eğer gruptaki herkes 10 kredisinin tamamını katkıda bulunursa:</strong></p>
                        <ul>
                            <li>Toplam ortak havuz: 40 kredi</li>
                            <li>İkiye katlandıktan sonra: 80 kredi</li>
                            <li>Herkesin bireysel kazancı: 20 kredi (herkesin kredi sayısı ikiye katlanır, bu da çekilişe adınızın iki kez yazılması anlamına gelir)</li>
                        </ul>
                        
                        <p><strong>Ancak eğer diğer herkes 10 kredisini ortak projeye koyarsa ama siz 10 kredinizi tutarsanız:</strong></p>
                        <ul>
                            <li>Siz 25 kredi kazanırsınız ve bu da çekilişe adınızın üç kere yazılması anlamına gelir (10 tuttuğunuz + 15 payınız).</li>
                            <li>Diğerleri sadece 15 kredi kazanır, yani çekilişe isimleri iki kez yazılır </li>
                            <li>Çünkü katkıda bulunduğunuz her 2 kredi için sadece 1 kredi geri alırsınız</li>
                            <li><strong>Bu nedenle kişisel olarak katkıda bulunarak para kaybedersiniz</strong></li>
                        </ul>
                    </div>

                    <div class="instruction-item">
                        <h3>Çekiliş Sistemi</h3>
                        <p>Kazandığınız her 10 kredi için 1 çekiliş bileti alacaksınız.</p>
                        
                        <div class="lottery-details">
                            <h4>Çekiliş Ödülleri:</h4>
                            <div class="prize-breakdown">
                                <div class="prize-row">
                                    <span class="prize-winner">1 Kişi:</span>
                                    <span class="prize-amount">400 TL Migros Hediye Çeki</span>
                                </div>
                                <div class="prize-row">
                                    <span class="prize-winner">2 Kişi: </span>
                                    <span class="prize-amount">300 TL Amazon Hediye Çeki</span>
                                </div>
                                <div class="prize-row">
                                    <span class="prize-winner">3 Kişi:</span>
                                    <span class="prize-amount">200 TL Starbucks Hediye Çeki</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="ticket-examples">
                            <h4>Çekiliş Bileti Örnekleri:</h4>
                            <ul>
                                <li><strong>10-14 kredi kazanırsanız → 1 çekiliş hakkı</strong></li>
                                <li><strong>15-20 kredi kazanırsanız → 2 çekiliş hakkı</strong></li>
                                <li><strong>21+ kredi kazanırsanız → 3 çekiliş hakkı</strong></li>
                                <li>9 kredi veya altı → 0 çekiliş hakkı</li>
                            </ul>
                        </div>
                    </div>

                    <div class="instruction-item">
                        <h3>Önemli Bilgiler</h3>
                        <p><strong>Diğer oynadığınız insanlar GERÇEK ve gerçekten bir karar verecekler</strong> - bu çalışmada herhangi bir aldatma yoktur.</p>
                        <p>Siz ve diğer kişiler ne kadar katkıda bulunacağınızı seçtikten sonra etkileşim sona erer.</p>
                    </div>
                </div>
                
                <button id="start-game-btn" class="btn btn-primary">Anladım, Oyunu Başlat</button>
            </div>
        </div>

        <!-- Waiting for Group to Start Screen -->
        <div id="waiting-group-start-screen" class="screen">
            <div class="card">
                <h2>Diğer Oyuncular Bekleniyor...</h2>
                <div class="player-counter">
                    <span id="ready-players">1</span> / 4 oyuncu hazır
                </div>
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Grubunuzdaki diğer oyuncular hazır olduğunda oyun başlayacak...</p>
                </div>
            </div>
        </div>

        <!-- Contribution Screen -->
        <div id="contribution-screen" class="screen">
            <div class="card">
                <h2>Katkı Kararınız</h2>
                <div class="contribution-interface">
                    <div class="condition-notice" id="condition-notice" style="display: none;">
                        <div class="time-pressure-notice" style="display: none;">
                            <p><strong>Lütfen kararınızı mümkün olduğunca hızlı verin!</strong></p>
                            <p><strong>Kararınızı 10 saniyeden az sürede vermelisiniz! </strong></p>
                            <div class="countdown" id="countdown">10</div>
                        </div>
                        <div class="time-delay-notice" style="display: none;">
                            <p><strong>Lütfen kararınızı dikkatli bir şekilde düşünün.</strong></p>
                            <p><strong>Kararınızı vermeden önce en az 10 saniye beklemelisiniz!</strong></p>
                            <div class="wait-timer" id="wait-timer">0</div>
                        </div>
                    </div>

                    <div class="money-display">
                        <div class="starting-amount">
                            <h3>Başlangıç Miktarınız</h3>
                            <div class="amount">10 Kredi</div>
                        </div>
                    </div>

                    <div class="contribution-selector">
                        <label for="contribution-amount">Gruba katkınız (0-10 kredi):</label>
                        <div class="slider-container">
                            <input type="range" id="contribution-slider" min="0" max="10" step="1" value="0">
                            <div class="slider-labels">
                                <span>0 Kredi</span>
                                <span>10 Kredi</span>
                            </div>
                        </div>
                        <div class="contribution-display">
                            <div class="contribution-amount">
                                <span id="contribution-value">0</span> Kredi
                            </div>
                        </div>
                    </div>

                    <div class="calculation-preview">
                        <div class="calc-item">
                            <span>Katkınız:</span>
                            <span id="preview-contribution">0 Kredi</span>
                        </div>
                        <div class="calc-item">
                            <span>Cebinizde kalacak:</span>
                            <span id="preview-remaining">10 Kredi</span>
                        </div>
                    </div>
                </div>
                
                <button id="submit-contribution-btn" class="btn btn-primary">Kararımı Onayla</button>
            </div>
        </div>

        <!-- Waiting for Others Screen -->
        <div id="waiting-others-screen" class="screen">
            <div class="card">
                <h2>Diğer Oyuncular Karar Veriyor...</h2>
                <div class="waiting-info">
                    <div class="progress-display">
                        <span id="completed-players">1</span> / 4 oyuncu kararını verdi
                    </div>
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Lütfen bekleyin...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Comprehension Screen -->
        <div id="comprehension-screen" class="screen">
            <div class="card">
                <h2>Anlama Soruları</h2>
                <p><strong>Çekilişe katılabilmek için bu iki soruyu doğru cevaplamalısınız!</strong></p>
                <div class="comprehension-status" id="comprehension-status" style="display: none;">
                    <div class="status-indicator">
                        <span id="comprehension-completed">0</span> / 4 oyuncu sorularını cevapladı
                        <span class="waiting-text">Diğer oyuncular cevaplarını bekliyor...</span>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question">
                        <h3>Soru 1:</h3>
                        <p><strong>Hangi katkı seviyesi grup geneli için en yüksek kazancı sağlar?</strong></p>
                        <div class="radio-group">
                            <label><input type="radio" name="q1" value="0"> Herkes 0 kredi katkıda bulunursa</label>
                            <label><input type="radio" name="q1" value="5"> Herkes 5 kredi katkıda bulunursa</label>
                            <label><input type="radio" name="q1" value="10"> Herkes 10 kredi katkıda bulunursa</label>
                            <label><input type="radio" name="q1" value="varying"> Diğerlerinin katkısına bağlı</label>
                        </div>
                    </div>

                    <div class="question">
                        <h3>Soru 2:</h3>
                        <p><strong>Hangi katkı seviyesi sizin kişisel olarak en yüksek kazancınızı sağlar?</strong></p>
                        <div class="radio-group">
                            <label><input type="radio" name="q2" value="0"> 0 kredi katkıda bulunursanız</label>
                            <label><input type="radio" name="q2" value="5"> 5 kredi katkıda bulunursanız</label>
                            <label><input type="radio" name="q2" value="10"> 10 kredi katkıda bulunursanız</label>
                            <label><input type="radio" name="q2" value="depends"> Diğerlerinin katkısına bağlı</label>
                        </div>
                    </div>
                </div>
                
                <button id="submit-comprehension-btn" class="btn btn-primary">Cevapları Gönder</button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen">
            <div class="card">
                <h2>Oyun Sonuçları</h2>
                <div class="results-content">
                    <div class="result-summary">
                        <h3>Sizin Sonuçlarınız</h3>
                        <div class="result-grid">
                            <div class="result-item">
                                <span class="label">Katkınız:</span>
                                <span class="value" id="result-contribution">- Kredi</span>
                            </div>
                            <div class="result-item">
                                <span class="label">Cebinizde kalan:</span>
                                <span class="value" id="result-kept">- Kredi</span>
                            </div>
                            <div class="result-item">
                                <span class="label">Size düşen pay:</span>
                                <span class="value" id="result-share">- Kredi</span>
                            </div>
                            <div class="result-item highlight">
                                <span class="label">Toplam kazancınız:</span>
                                <span class="value" id="result-total">- Kredi</span>
                            </div>
                            <div class="result-item lottery">
                                <span class="label">Çekiliş biletiniz:</span>
                                <span class="value" id="result-tickets">- Bilet</span>
                            </div>
                        </div>
                    </div>

                    <div class="group-results">
                        <h3>Grup Sonuçları</h3>
                        <div class="group-summary">
                            <div class="group-item">
                                <span class="label">Toplam grup katkısı:</span>
                                <span class="value" id="group-total-contribution">- Kredi</span>
                            </div>
                            <div class="group-item">
                                <span class="label">İkiye katlanmış havuz:</span>
                                <span class="value" id="group-doubled-pool">- Kredi</span>
                            </div>
                        </div>
                        
                        <div class="all-contributions">
                            <h4>Tüm Oyuncuların Katkıları</h4>
                            <div id="all-contributions-list" class="contributions-list">
                                <!-- Contributions will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <button id="complete-experiment-btn" class="btn btn-primary">Deneyi Tamamla</button>
            </div>
        </div>

        <!-- Final Screen -->
        <div id="final-screen" class="screen">
            <div class="card">
                <h2>Deney Tamamlandı</h2>
                <div class="final-message">
                    <p>Deneye katılımınız için teşekkür ederiz!</p>
                    <p>Verileriniz başarıyla kaydedildi.</p>
                    
                    <div class="final-credits">
                        <h3>Son Durum:</h3>
                        <p><strong>Kazandığınız kredi:</strong> <span id="final-credits-won">-</span></p>
                        <p><strong>Çekiliş biletiniz:</strong> <span id="final-tickets-won">-</span></p>
                    </div>

                    <div class="lottery-reminder">
                        <h3>Çekiliş Ödülleri Hatırlatması:</h3>
                        <div class="final-prizes">
                            <div class="final-prize-item">
                                <span class="final-prize-icon">1.</span>
                                <span class="final-prize-text">1 kişi → 400 TL Migros Hediye Çeki</span>
                            </div>
                            <div class="final-prize-item">
                                <span class="final-prize-icon">2.</span>
                                <span class="final-prize-text">2 kişi → 300 TL Amazon Hediye Çeki</span>
                            </div>
                            <div class="final-prize-item">
                                <span class="final-prize-icon">3.</span>
                                <span class="final-prize-text">3 kişi → 200 TL Starbucks Hediye Çeki</span>
                            </div>
                        </div>
                        <p class="lottery-note"><strong>Eğer anlama sorularını doğru yanıtladıysanız isminiz çekilişe belirtildiği kadar dahil edilecektir ve çekiliş sonuçları e-posta ile bildirilecektir.</strong></p>
                    </div>
                    
                    <p class="small-text">Bu pencereyi kapatabilirsiniz.</p>
                </div>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html> 